models:
  - name: stg_customers
    columns:
      - name: customer_id
        tests:
          - not_null
          - unique
  - name: stg_locations
    columns:
      - name: location_id
        tests:
          - not_null
          - unique
  - name: stg_order_items
    columns:
      - name: order_item_id
        tests:
          - not_null
          - unique
  - name: stg_orders
    tests:
      - dbt_utils.expression_is_true:
          expression: "order_total > 5"
    columns:
      - name: order_id
        tests:
          - not_null
          - unique
      - name: order_total
        tests:
          - assert_column_is_greater_than_5
          - dbt_expectations.expect_column_values_to_be_between:
                min_value: 5
                row_condition: "order_id is not null" 
                strictly: True
      - name: customer_id
        tests:
          - dbt_utils.cardinality_equality:
              field: customer_id
              to: ref('stg_customers')
  - name: stg_products
    access: private
    config:
      group: product
    columns:
      - name: product_id
        tests:
          - not_null
          - unique
  - name: stg_supplies
    columns:
      - name: supply_uuid
        tests:
          - not_null
          - unique
